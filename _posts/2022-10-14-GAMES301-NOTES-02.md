---
layout: article
title: GAMES301课程笔记02-面向离散网格的参数化概述
tags: ["GAMES301", "Geometry Processing","CG"]
key: GAMES301-02
aside:
  toc: true
sidebar:
  nav: GAMES301
---

> 这个系列是GAMES301-曲面参数化([GAMES 301: Surface Parameterization](http://staff.ustc.edu.cn/~renjiec/GAMES301/index.html))的同步课程笔记。课程内容涉及曲面参数化的基本理论与问题描述、面向离散网格的参数化、基于基函数表示的连续参数化、共形参数化、曲面参数化的应用等。本节课主要介绍面向离散网格的参数化以及传统的参数化方法。
<!--more-->

## Mesh-Based Mappings

### Discrete Meshes

离散网格由**顶点(vertex)**、**边(edge)**以及**面(facet)**组成，其中顶点的位置描述了网格的几何而顶点之间的连接关系则描述了网格的拓扑。

<div align=center>
<img src="https://i.imgur.com/UaQgYyV.png" width="80%">
</div>

常见的离散网格包括三角形网格、四边形网格、四面体网格以及六面体网格。其中三角形网格和四边形网格只包含物体的表面，而四面体网格和六面体网格则填充了物体的内部。

<div align=center>
<img src="https://i.imgur.com/99VqZNP.png" width="80%">
</div>

### Mappings

离散网格上的映射是指网格到网格的映射。理论上网格的几何和拓扑都可以称为映射的对象，不过在大多数情况下我们都不会改变网格的拓扑关系，因此这里假定网格上的映射是改变顶点坐标的函数。

<div align=center>
<img src="https://i.imgur.com/t4KSYvp.png" width="80%">
<img src="https://i.imgur.com/5oFuP4X.png" width="80%">
</div>

对于线性网格(三角形网格)，映射在每个面片上都是一个线性映射，此时整个网格上的映射是一个$C^0$连续的分片线性映射。这里需要注意的是四边形网格和六面体网格都不是线性网格，对应的映射也不是线性映射。

<div align=center>
<img src="https://i.imgur.com/YSinLe5.png" width="80%">
</div>

在本课程中我们大多数情况下只考虑线性网格和线性映射。以二维平面上的映射为例，假设平面上的三角形$t$经过$f_t$映射为三角形$T$。由于映射是线性的，三角形的顶点坐标变换可以表示为线性函数：

$$
f_t (\mathbf{x}) = \mathbf{J}_t \mathbf{x} + \mathbf{b}_t
$$

实际上变换矩阵$\mathbf{J}_t$即为映射的Jacobian矩阵：

$$
\mathbf{J}_t = 
\begin{bmatrix}
\frac{\partial u}{\partial x} & \frac{\partial u}{\partial y} \\
\frac{\partial v}{\partial x} & \frac{\partial v}{\partial y} \\
\end{bmatrix}
$$

我们可以通过构造线性方程组的方式来求解$\mathbf{J}_t$：

$$
\mathbf{J}_t = 
\begin{bmatrix}
u_j - u_i & u_k - u_i \\
v_j - v_i & v_k - v_i \\
\end{bmatrix}
\begin{bmatrix}
x_j - x_i & x_k - x_i \\
y_j - y_i & y_k - y_i \\
\end{bmatrix}^{-1}
$$

而且$\mathbf{J}_t$的行列式恰为映射后三角形$T$的面积除以映射前三角形$t$的面积。

<div align=center>
<img src="https://i.imgur.com/nySMZzv.png" width="80%">
</div>

对于四面体网格同样有类似的结论：

<div align=center>
<img src="https://i.imgur.com/zGzY9dA.png" width="80%">
</div>

### Distortion

我们希望映射前后三角形的各种几何量不要发生太大的扭曲。能够保证三个夹角保持不变的映射称为共形映射，保证面积不变的映射称为等积映射，而同时保证夹角和面积的映射则称为等距映射。

<div align=center>
<img src="https://i.imgur.com/gDvuEJN.png" width="80%">
</div>

为了描述线性映射的行为我们需要引入**SSVD**，它是SVD的推广。SSVD说明线性映射可以理解为旋转和放缩的复合。

<div align=center>
<img src="https://i.imgur.com/aPigsgJ.png" width="80%">
</div>

利用SSVD对$\mathbf{J}_t$进行分解，两个奇异值刻画了线性映射的性质。如果两个奇异值都为1则说明映射为等距映射，如果两个奇异值相等则说明映射是共形映射，而如果两个奇异值的乘积为1则说明映射是等积映射。

<div align=center>
<img src="https://i.imgur.com/l181IZd.png" width="80%">
</div>

更进一步，几何扭曲也可以使用映射的奇异值进行描述。很多参数化算法的本质都可以理解为使用两个奇异值来构造优化问题。

<div align=center>
<img src="https://i.imgur.com/OdDFHBh.png" width="80%">
</div>

### Constraints

我们要求映射前后三角形不能发生翻转，因此Jacobian矩阵$\mathbf{J}_t$的行列式必须恒为正。

<div align=center>
<img src="https://i.imgur.com/Ub8YjIq.png" width="80%">
<img src="https://i.imgur.com/DX49FDL.png" width="80%">
</div>

除了没有翻转之外，映射还需要满足**局部单射(local injective)**的条件。这里需要说明的是局部单射与没有翻转是不完全相同的概念，局部单射要求对于边界上的顶点其内角和需要小于$2 \pi$。

<div align=center>
<img src="https://i.imgur.com/CIygdsy.png" width="80%">
</div>

类似地，我们希望映射能够满足**全局单射(global injective)**的条件。这表示映射后每一点都满足局部单射，不会出现自相交的情况。

<div align=center>
<img src="https://i.imgur.com/rzxxsI5.png" width="80%">
</div>

这样求解几何映射就可以表示为带约束的优化问题，其目标函数包括几何扭曲以及一些额外的度量，而约束则包括基本约束(无翻转、无自交)和实际问题的约束(位置约束、边界约束等)。

<div align=center>
<img src="https://i.imgur.com/t1acsiS.png" width="80%">
</div>

而优化问题在求解上的困难在于在大多数情况下它都是一个非凸非线性的优化问题。

<div align=center>
<img src="https://i.imgur.com/4TfHJLr.png" width="80%">
</div>

## Mesh Parameterizations

### Tutte's Embedding

### Angle-Based Flattening

### Least-Square Conformal Mapping

### As-Rigid-As-Possible

## Reference

- [Lecture 02：面向离散网格的参数化概述](https://www.bilibili.com/video/BV18T411P7hT?p=2&vd_source=7a2542c6c909b3ee1fab551277360826)