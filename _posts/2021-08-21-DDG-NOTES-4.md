---
layout: article
title: DDG课程笔记4-曲面参数化
tags: ["DDG", "CG"]
key: DDG-4
aside:
  toc: true
sidebar:
  nav: DDG
---

> 这个系列是对CMU离散微分几何课程([CMU CS 15-458/858: Discrete Differential Geometry](https://brickisland.net/DDGSpring2021/))的总结和回顾。本节我们介绍基于共形映射的曲面参数化方法。
<!--more-->

## Overview

曲面参数化可以理解为将空间曲面展开成平面的过程。在日常生活中曲面参数化最常见的例子是世界地图，这里我们将球面展开成平面矩形或是其他平面图形。

<div align=center>
<img src="https://i.imgur.com/rfTatPZ.png" width="70%">
</div>

对曲面进行参数化时可能会导致各种各样的扭曲。还是以世界地图为例，地图上的面积并不能表示实际的面积大小：在地图上格陵兰岛看着比澳大利亚要大，但实际的面积却要小得多(Greenland: 2.166m km², Australia: 7.692m km²)。

<div align=center>
<img src="https://i.imgur.com/pXXEcWe.png" width="60%">
</div>

显然，我们希望参数化后的曲面能够保持原始曲面上的几何量，比如说角度、长度、面积等。其中能够保证角度在变换前后保持不变的映射称为**共形映射(conformal map)**，稍后我们会介绍共形映射的各种性质。使用共形映射的好处之一我们有非常扎实的理论保证，比如说我们可以保证对于开放曲面共形映射是一定存在的；同时基于共形映射的参数化方法在计算上也大多比较高效，很多算法甚至可以做到实时；此外共形映射往往会得到比较平滑的结果，而其它的参数化方法则不一定能够保证这点。

<div align=center>
<img src="https://i.imgur.com/FiyCxWe.png" width="70%">
</div>

## Conformal Map

### Complex Numbers

在这一节我们开始介绍共形映射的相关理论。由于共形映射与复分析有着深刻的联系，因此在正式介绍前首先来补充一些复数的基本知识。我们知道复平面上的点可以表示为实部和虚部的形式：

$$
z = a + bi
$$

$$
i^2 = -1
$$

从几何的角度上看，虚数单位$i$可以理解为将向量逆时针转90$^\circ$。

<div align=center>
<img src="https://i.imgur.com/KgaVCWZ.png" width="30%">
</div>

同时复数的代数运算法则也可以理解为平面向量的运算法则：

<div align=center>
<img src="https://i.imgur.com/1oqZkRt.png" width="70%">
</div>

利用**欧拉公式(Euler's formula)**我们还可以把复数表示成极坐标的形式：

$$
e^{i \theta} = \cos \theta + i \sin \theta
$$

<div align=center>
<img src="https://i.imgur.com/stqsQ8q.png" width="70%">
</div>

此时复数的乘法相当于对向量的长度进行缩放同时对角度进行加减：

$$
z_1 z_2 = (r_1 e^{i \theta_1}) \cdot (r_2 e^{i \theta_2}) = (r_1 r_2) e^{i (\theta_1 + \theta_2)}
$$

<div align=center>
<img src="https://i.imgur.com/2X7jG3z.png" width="30%">
</div>

### Conformal Structure

对于曲面切平面上的向量$X$，我们可以利用向量叉乘来表示旋转：

$$
N \times df(X)
$$

显然旋转后的向量一定也位于切平面上，因此存在一个映射$\mathcal{J}$使得：

$$
df(\mathcal{J} X) = N \times df(X)
$$

我们称$\mathcal{J}$为映射$f$诱导的**共形结构(conformal structure)**，具有共形结构的曲面则称为**黎曼曲面(Riemann surface)**。

<div align=center>
<img src="https://i.imgur.com/OAnN6lr.png" width="70%">
</div>

不难发现共形结构$\mathcal{J}$和虚数单位$i$起着类似地作用，$\mathcal{J}$也满足$i$的定义：

$$
\mathcal{J} \circ \mathcal{J} = -\text{id}
$$

其中$\text{id}$表示恒等映射。上式说明对向量$X$使用两次$\mathcal{J}$相当于将$X$反向。

### Cauchy-Riemann Equation

对于共形映射我们要求切平面上任意两个向量的夹角在变换前后保持不变，实际上我们并不需要考虑所有的夹角只需考虑共形结构$\mathcal{J}$即可。将参数化后的平面用复平面来表示，此时共形映射$z: M \rightarrow \mathbb{C}$满足**Cauchy-Riemann方程(Cauchy-Riemann equation)**:

$$
dz (\mathcal{J} X) = i \ dz(X)
$$

<div align=center>
<img src="https://i.imgur.com/8NMw6gO.png" width="70%">
</div>

Cauchy-Riemann方程表明在切平面上进行旋转和在参数化平面上进行旋转是一致的，因此曲面上的角度在参数化后保持不变。

### Riemann Metrics

此外我们还可以通过黎曼度量来认识共形映射。对于同一个曲面的两个度量$\tilde{g}_p$和$g_p$，如果它们在曲面任意点$p$上只相差一个系数，则称两个度量是**共形等价(conformally equivalent)**：

$$
\tilde{g}_p = e^{2u(p)} g_p
$$

其中$e^{2u(p)}$说明该系数为正且与点$p$相关。回忆黎曼度量给出了曲面切平面上内积的定义，我们可以定义曲面上的长度和角度：

$$
\vert X \vert = \sqrt{g(X, X)}
$$

$$
\angle(X, Y) = \arccos \Big( \frac{g(X, Y)}{\vert X \vert \vert Y \vert} \Big)
$$

不难验证对于共形等价的两个度量，它们关于角度的定义是相同的。

## Spectral Conformal Parameterization

本节最后来介绍基于共形映射的曲面参数化算法，限于篇幅和自身水平有限这里仅介绍使用Cauchy-Riemann方程的SCP算法。

### Complex Differential Forms

首先我们需要将微分形式拓展到复数域上。设$\alpha$为复数域上的1-form，利用共形结构的性质可以得到1-form对应的Hodge star算子：

$$
\star \alpha(X) = \alpha(\mathcal{J} X)
$$

同时定义2-form的Hodge star算子为：

$$
\star \omega = \omega(X, \mathcal{J} X)
$$

### Conformal Parameterization

### Optimization

## Reference
- [CHAPTER 7: Surface Parameterization](http://www.cs.cmu.edu/~kmcrane/Projects/DDG/paper.pdf#page=117)
- [Wikipedia: Riemann mapping theorem](https://en.wikipedia.org/wiki/Riemann_mapping_theorem)
- [Spectral Conformal Parameterization](http://citeseerx.ist.psu.edu/viewdoc/download;jsessionid=2ED4668E435E981FAE61B704DC50C565?doi=10.1.1.151.2357&rep=rep1&type=pdf)