---
layout: article
title: GAMES104课程笔记09-Advanced Animation Technology
tags: ["GAMES104", "CG"]
key: GAMES104-09
aside:
  toc: true
sidebar:
  nav: GAMES104
---

> 这个系列是GAMES104-现代游戏引擎：从入门到实践([GAMES 104: Modern Game Engine-Theory and Practice](https://games104.boomingtech.com/en/))的同步课程笔记。本课程会介绍现代游戏引擎所涉及的系统架构、技术点以及引擎系统相关的知识。本节课主要介绍动画系统中的一些前沿技术。
<!--more-->

在上一节课中我们介绍了游戏引擎中动画系统的基本内容。基于上一讲的内容已经可以实现一些简单的动画了，而现代3A游戏会在这些内容的基础上添加更多的细节来实现更加真实的动画效果。

## Animation Blending

基于[DCC流程](/2022/05/11/GAMES104-NOTES-08.html#animation-dcc-process)我们可以获得不同的动画资源，然而这些资源往往是相互独立的，在实际游戏中我们还需要将不同类型的动画混合起来以实现更加自然的运动效果。以角色的跑动为例，人体的跑动包含低速的步行以及高速的跑动两个部分的动画。将两个动画混合起来就可以实现自然的变速效果。

<div align=center>
<img src="https://i.imgur.com/YWYeBeY.png" width="80%">
</div>

要实现动画的混合非常简单，我们只需要对骨骼的姿态进行插值即可。但和上节课介绍的[关键帧插值](2022/05/11/GAMES104-NOTES-08.html#interpolation)不同，在进行动画混合时不仅需要考虑同一组动画关键帧之间的插值，还要考虑不同组动画不同关键帧的插值。

<div align=center>
<img src="https://i.imgur.com/EHVN0nu.png" width="80%">
</div>

计算插值权重也比不是很难，我们可以按照当前角色运动的速度来选择两个相邻动作的关键帧。两个动作的权重即为对速度进行线性插值的权重。

<div align=center>
<img src="https://i.imgur.com/nylXVVz.png" width="80%">
</div>

在进行动画混合时还要考虑时间线上对齐的问题。要使插值后的动作更加自然，我们需要动画师在动画建模时将每个动画都按照无限循环播放的形式进行设计。同时，两组进行混合的动画最好要保证角色具有相同的肢体运动频率。这样可以保证混合后的动画更加自然，不会出现角色滑行的结果。

<div align=center>
<img src="https://i.imgur.com/RzuZvJ5.png" width="80%">
</div>

## Blend Space

## Action State Machine (ASM)

## Animation Blend Tree

## Inverse Kinematics (IK)

## Facial Animation

## Animation Retargeting

## Reference

- [Lecture 09：Advanced Animation Technology](https://www.bilibili.com/video/BV1pY411F7pA)