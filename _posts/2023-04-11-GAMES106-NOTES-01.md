---
layout: article
title: GAMES106课程笔记01-现代图形绘制流水线导论
tags: ["CG", "GAMES106", "Rendering"]
key: GAMES106-01
aside:
  toc: true
sidebar:
  nav: GAMES106
---

> 这个系列是GAMES106-现代图形绘制流水线原理与实践([GAMES 106: Intro to Modern Rendering Pipeline](https://zju-rendering.github.io/games106/))的同步课程笔记。课程内容涉及现代图形绘制流水线的基础原理，实践方法，以及优化技巧。本节课主要介绍绘制流水线的概念和发展历程。
<!--more-->

## 图形绘制

渲染或者说**图形绘制(rendering)**是研究如何利用计算机来生成图像的学科。在制造业、影视行业、游戏行业、艺术设计以及科学数据的可视化等各种场景中，图形绘制都有着大量的应用。

<div align=center>
<img src="https://images.weserv.nl/?url=i.imgur.com/PKunqc5.png" width="80%">
</div>

在这些不同应用场景中负责图形绘制的软件称为绘制引擎。根据不同应用场景的需要，不同的绘制引擎往往有着相应的侧重点。

<div align=center>
<img src="https://images.weserv.nl/?url=i.imgur.com/3NVMzco.png" width="80%">
</div>

在绘制引擎的底层我们还需要各种计算和显示硬件的支持

<div align=center>
<img src="https://images.weserv.nl/?url=i.imgur.com/oh9kv7Z.png" width="80%">
</div>

而在绘制引擎与硬件之间则需要绘制流水线进行沟通，它涉及到图形算法、硬件规范等等。某种意义上讲，我们可以把绘制流水线当做绘制引擎的后端，我们需要通过绘制流水线来控制硬件执行图形绘制。

<div align=center>
<img src="https://images.weserv.nl/?url=i.imgur.com/Md4hmSb.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/YykTGVM.png" width="80%">
</div>

当我们需要设计新的图形算法或者实现新特效时，我们就大概率需要和绘制流水线来打交道。在算法层面外，学习绘制流水线还需要对硬件有一定的认识，很多对实时性有要求的场景都依赖于定制的绘制流水线。如何提升绘制流水线的性能也是产业和学术界的一个热点。

<div align=center>
<img src="https://images.weserv.nl/?url=i.imgur.com/wAwzZjb.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/04zHiMQ.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/4hYwYdN.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/iVKni4B.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/cA1GUG0.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/oBpcRh7.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/Y2hUUXZ.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/Rwj0aeS.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/bqt6p1x.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/DJgnJjX.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/9EwGCFt.png" width="80%">
</div>

## 认识绘制流水线

### 固定绘制流水线

从宏观来看，绘制流水线的输入包括场景的几何、纹理和光照信息，而它的输出则是场景的图片。

<div align=center>
<img src="https://images.weserv.nl/?url=i.imgur.com/ssqUPkA.png" width="80%">
</div>

### 可编程绘制流水线

随着GPU技术的发展，现代绘制流水线在经典绘制流水线的基础上还添加了大量的可编程着色器用来实现更加丰富的功能。

<div align=center>
<img src="https://images.weserv.nl/?url=i.imgur.com/zsWxJ2V.png" width="80%">
</div>

常见的可编程流水线一般包括如下功能：

1. Vertex/Index Buffer: 读取三角形顶点位置和连接关系
2. Input Assembles: 将读取到的三角形顶点信息组装成三角面片
3. Vertex Shader: 将三角形的顶点坐标变换到相机坐标系下
4. Rasteriation: 把三角面片投影到屏幕空间上并进行像素化
5. Fragment Shader: 根据纹理和光照信息计算每个三角面片的着色
6. Color Blending: 对不同通道的颜色进行混合
7. Frame Buffer: 存储计算得到的图片并输出到显式设备中

<div align=center>
<img src="https://images.weserv.nl/?url=i.imgur.com/pxjlISV.png" width="80%">
</div>

整个流水线中有些组件的功能是非常固定的，硬件厂商已经对它们进行了大量的优化我们也基本无需进行更多的修改，而各种shader则允许进行各种定制以实现不同的显示效果。

<div align=center>
<img src="https://images.weserv.nl/?url=i.imgur.com/DjhOkq2.png" width="80%">
</div>

本课程会根据现代绘制流水线的各个流程逐一介绍相关的技术。

<div align=center>
<img src="https://images.weserv.nl/?url=i.imgur.com/cw9v1SS.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/XrfZFqL.png" width="80%">
<img src="https://images.weserv.nl/?url=i.imgur.com/Jrov7hZ.png" width="80%">
</div>

## 绘制流水线的演变

### 经典绘制流水线

### 现代绘制流水线

### 未来

## Reference

- [Lecture 01: 现代图形绘制流水线导论](https://www.bilibili.com/video/BV1Uo4y1J7ie/?spm_id_from=333.999.0.0&vd_source=7a2542c6c909b3ee1fab551277360826)