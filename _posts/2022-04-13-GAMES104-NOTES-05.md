---
layout: article
title: GAMES104课程笔记05-Lighting, Materials and Shaders
tags: ["GAMES104", "CG"]
key: GAMES104-05
aside:
  toc: true
sidebar:
  nav: GAMES104
---

> 这个系列是GAMES104-现代游戏引擎：从入门到实践([GAMES 104: Modern Game Engine-Theory and Practice](https://games104.boomingtech.com/en/))的同步课程笔记。本课程会介绍现代游戏引擎所涉及的系统架构、技术点以及引擎系统相关的知识。本节课主要介绍现代游戏引擎的实时渲染算法。
<!--more-->

在上一节课中我们介绍了渲染的概念，而本节课我们则会开始介绍游戏引擎中具体的渲染算法。渲染是研究光与材质相互作用的学科，因此本节课从光线、材质以及shader三个方面介绍现代游戏引擎中各种经典实时算法的实现。

<div align=center>
<img src="https://i.imgur.com/ev8jRMf.png" width="80%">
</div>

## The Rendering Equation

渲染的本质是求解**渲染方程(the rendering equation)**，它由James Kajiya于1986年提出。

<div align=center>
<img src="https://i.imgur.com/komPRjJ.png" width="80%">
</div>

不严格地讲，渲染方程指出空间点$x$在方向$\omega_o$上出射的能量等于它自身在该方向发射的能量加上来自半球面上所有方向入射并经过反射后反射到$\omega_o$上的能量之和。

<div align=center>
<img src="https://i.imgur.com/OybsJIM.png" width="80%">
</div>

### Complexity of Real Rendering

显然想要直接求解渲染方程是相当困难的。在现实的场景中光线会在物体表面经过多次反射，同时不同的材质也有着天差地别的反射行为。

<div align=center>
<img src="https://i.imgur.com/4DmIPlp.png" width="80%">
</div>

渲染的难点之一在于阴影，或者说是光的可见性。如何做出合适的阴影效果远比想象中要难得多，在实践中往往需要通过大量的技巧才能实现符合人认知的阴影效果。

<div align=center>
<img src="https://i.imgur.com/73c8jwW.png" width="80%">
</div>

其次，场景中往往有着各种类型的光源需要考虑。常见的光源形式包括平行光、点光源、聚光灯、面光源等等。

<div align=center>
<img src="https://i.imgur.com/YVnO16j.png" width="80%">
</div>

材质是渲染中最为复杂的因素之一。如何设计符合现实世界的材质模型并且满足实时计算的要求是实时渲染的一大难点。

<div align=center>
<img src="https://i.imgur.com/79RC5lh.png" width="80%">
</div>

最后，在渲染时需要考虑光线在场景中不断反射的行为。全局光照一直是渲染的终极目标。

<div align=center>
<img src="https://i.imgur.com/Ll9aKjG.png" width="80%">
</div>

总结一下，渲染的难点可以分为一下三部分：如何计算入射光线、如何考虑材质以及如何实现全局光照。

<div align=center>
<img src="https://i.imgur.com/JwPhYP0.png" width="80%">
</div>

## Light Solution

## Pre-computed Global Illumination.

## Physical-Based Material

## Image-Based Lighting

## Classic Shadow Solution

## Moving Wave of High Quality

## Shader Management

## Reference

- [Lecture 05：Rendering on Game Engine](https://www.bilibili.com/video/BV1J3411n7WT)
