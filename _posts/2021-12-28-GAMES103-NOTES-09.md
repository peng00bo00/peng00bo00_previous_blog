---
layout: article
title: GAMES103课程笔记09-Collision Handling
tags: ["GAMES103", "CG"]
key: GAMES103-09
aside:
  toc: true
sidebar:
  nav: GAMES103
---

> 这个系列是GAMES103：基于物理的计算机动画入门([GAMES 103: Intro to Physics Based Animation](http://games-cn.org/games103/))的同步课程笔记。本课程是计算机动画的入门课程，着重介绍各种基于物理的动画仿真模拟技术。本节课物理仿真中的碰撞检测和处理。
<!--more-->

## Collision Detection

**碰撞检测(collision detection)**是物理仿真中非常重要的一环。根据检测的精细程度不同，碰撞检测的流程可以大体分为**broad-phase**和**narrow-phase**两个步骤：broad-phase用来产生碰撞物体的后续，然后在narrow-phase中执行具体的检测。

<div align=center>
<img src="https://i.imgur.com/s3CoF1L.png" width="80%">
</div>

### Spatial Partitioning

**空间划分(spatial partitioning/hashing)**是broad-phase检测中常用的一种方式。它的基本思想是把空间划分成若干个互不重叠的区域，然后把每个物体放置在这些区域中，这样进行碰撞检测时只需要在相邻的格子中进行判断即可。由于物体可能会和不同的格子相交，因此在放置这些物体时需要把物体放置在所有相交的格子中。

<div align=center>
<img src="https://i.imgur.com/slUpZPO.png" width="80%">
</div>

为了优化碰撞检测时的内存需求我们可以将物体和它所在的格子按照编号进行排序，这样就可以避免为空的格子分配内存。

<div align=center>
<img src="https://i.imgur.com/z7gtSwD.png" width="80%">
</div>

除此之外还可以利用**Morton code**来进一步优化访问时的缓存需求。Morton code是一种按照Z形进行编码的顺序。在对格子进行编号时我们不再按照先行后列的方式而是使用Morton code进行编号，这样可以保证访问时每个格子的邻居在内存中存储的位置都在它的附近从而提升访问的效率。

<div align=center>
<img src="https://i.imgur.com/IMeGLsH.png" width="80%">
</div>

### Bounding Volume Hierarchy

### Collision Detection Pipeline

### Continuous Collision Detection

## Collision Handling

## Reference

- [Lecture 9: Collision Handling](https://www.bilibili.com/video/BV12Q4y1S73g?p=9)
- [Broad-Phase Collision Detection with CUDA](https://developer.nvidia.com/gpugems/gpugems3/part-v-physics-simulation/chapter-32-broad-phase-collision-detection-cuda)