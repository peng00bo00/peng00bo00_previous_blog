---
layout: article
title: C++ STL笔记03-std::array数组
tags: ["C++", "STL"]
key: STL-03
clipboard: true
aside:
  toc: true
sidebar:
  nav: STL
---

> 动手实现C++ STL容器。本节介绍std::array的常见用法和实现。
<!--more-->

## std::array用法

[std::array](https://en.cppreference.com/w/cpp/container/array)是C++标准库中的一个容器，用于表示一个固定大小的数组。它的用法与C中内置数组的用法基本一致，但还具有许多STL容器的优点：

- 固定大小：`std::array`的大小在创建时确定，不能在运行时改变；
- 范围检查：`std::array`在访问元素时会进行边界检查，防止越界访问；
- 迭代器：可以使用迭代器来遍历`std::array`中的元素，使其与其他STL容器兼容；
- 大小信息：可以通过`size()`方法获取数组的大小；
- 支持STL算法：很多STL算法可以直接应用在`std::array`上。

创建并访问`std::array`元素可以参考如下代码：

```cpp
#include <iostream>
#include <array>

int main()
{
    std::array<int, 5> MyArray = {1, 2, 3, 4, 5};
    
    // 访问元素
    std::cout << "First element: " << MyArray[0] << std::endl;

    // 获取数组大小
    std::cout << "Array size: " << MyArray.size() << std::endl;

    // 使用迭代器遍历数组
    for (const auto& element : MyArray) {
        std::cout << element << " ";
    }

    return 0;
}
```
{: .snippet}

运行上面的代码可以得到如下结果：

```
First element: 1
Array size: 5
1 2 3 4 5 
```

## Array实现

接下来我们从零开始实现一个类似于标准库中`std::array`的数组`Array`。

### 模板定义

首先是模板定义，在创建`Array`时我们需要指定两个模板参数：元素类型`_Tp`以及数组大小`_N`，然后再`Array`内部创建一个数组`_M_element[_N]`存储实际的元素：

```cpp
template <class _Tp, size_t _N>
struct Array {
    _Tp _M_element[_N];
}
```

## Reference

- [stl1weekend](https://github.com/parallel101/stl1weekend/tree/main#%E8%87%AA%E5%B7%B1%E5%AE%9E%E7%8E%B0%E6%89%80%E6%9C%89stl%E5%AE%B9%E5%99%A8)
- [【C++11】自己动手做标准库：实现array容器](https://www.bilibili.com/video/BV1Tw411k7QB/?spm_id_from=333.788&vd_source=7a2542c6c909b3ee1fab551277360826)