---
layout: article
title: GAMES104课程笔记13-Foundation of Tool Chains
tags: ["GAMES104", "CG"]
key: GAMES104-13
aside:
  toc: true
sidebar:
  nav: GAMES104
---

> 这个系列是GAMES104-现代游戏引擎：从入门到实践([GAMES 104: Modern Game Engine-Theory and Practice](https://games104.boomingtech.com/en/))的同步课程笔记。本课程会介绍现代游戏引擎所涉及的系统架构、技术点以及引擎系统相关的知识。本节课主要介绍游戏引擎中的工具链。
<!--more-->

## Tool Chain

**工具链(tool chain)**是沟通游戏引擎用户以及更底层run time(渲染系统、物理引擎、网络通信等)之间的桥梁。对于商业级游戏引擎来说，工具链的工程量往往要比run time大得多。

<div align=center>
<img src="https://i.imgur.com/0NRgQ9s.png" width="80%">
</div>

另一方面，工具链也是连接游戏引擎以及第三方DCC工具的核心。在现代游戏工业中需要使用到大量的第三方工具如MAYA、3DS MAX等，在进行游戏开发时需要通过工具链将这些第三方DCC的资源加载到游戏引擎中。

<div align=center>
<img src="https://i.imgur.com/OWjN2oF.png" width="80%">
</div>

从更高级的视角来看，工具链的本质是调和不同背景和思维方式用户的一套平台。对于开发者，工具链需要方便开发者管理游戏中大量资源和对象；对于设计师，工具链需要帮助他们快速实现不同的游戏逻辑；而对于艺术家，工具链则需要帮助他们表达不同的创意。工具链需要服务这些拥有不同知识背景的用户以便更好地完成游戏开发的过程。

<div align=center>
<img src="https://i.imgur.com/CN0im4K.png" width="80%">
</div>

## Complicated Tool

### GUI

GUI是工具链与用户直接进行交互的接口，在现代软件工程中GUI是人机交互的必要环节。

<div align=center>
<img src="https://i.imgur.com/d5Vo39i.png" width="80%">
</div>

目前GUI主要有两大类实现方式，其一是**immediate mode**。在immediate mode中用户的操作会直接调用GUI模块进行绘制，让用户看到操作后的效果。这种模式的特点是它非常直观而且易于实现，但它的效率和可拓展性往往不尽如人意。

<div align=center>
<img src="https://i.imgur.com/mULZMjS.png" width="80%">
<img src="https://i.imgur.com/ss1pyou.png" width="80%">
</div>

在现代游戏引擎中更常用的GUI实现方式是**retained mode**。在retained mode中用户的操作不会直接进行绘制，而是会把用户提交的指令先存储到一个buffer中，然后在引擎的绘制系统中再进行绘制。这样做的好处是可以极大地提高系统的运行效率和可拓展性，当然代价是这种方式的实现要更加复杂。

<div align=center>
<img src="https://i.imgur.com/WMShmUa.png" width="80%">
<img src="https://i.imgur.com/fj7b0OF.png" width="80%">
</div>

### Design Pattern

在设计GUI系统时需要**设计模式(design pattern)**相关的知识，这里简要介绍一些在GUI设计中常用的设计模式。

#### MVC

MVC是经典的人机交互设计模式。MVC的思想是把**用户(user)**、**视图(view)**和**模型(model)**进行分离，当用户想要修改视图时只能通过**控制器(controller)**进行操作并由控制器转发给模型，从而避免用户直接操作数据产生各种冲突。

<div align=center>
<img src="https://i.imgur.com/UYl6x0x.png" width="80%">
</div>

#### MVP

MVP可以看做是对MVC的演变。MVP模式对视图和模型进行了更彻底的分离，视图只负责对数据进行展示而模型只负责对数据进行处理，它们之间的通信则通过**展示者(presenter)**来实现。当用户想要修改数据时，用户的请求会通过视图提交给展示者，然后再由它转发给模型进行处理。

<div align=center>
<img src="https://i.imgur.com/ZGIJtvh.png" width="80%">
</div>

#### MVVM

MVVM是目前游戏引擎中大量使用的UI设计模式，在MVVM中视图和模型的中间层称为**ViewModel**。在MVVM模式中，视图只包含简单的UI状态数据，这些数据通过ViewModel解析成合适的数据结构再提交给模型进行处理。

<div align=center>
<img src="https://i.imgur.com/DZhWLgl.png" width="80%">
<img src="https://i.imgur.com/5CrPt9f.png" width="80%">
<img src="https://i.imgur.com/A3haF2l.png" width="80%">
</div>

### Serialization and Deserialization

## How to Load Asset

## How to Make Tool Chain

## What You See is What You Get

## Plugin

## Reference

- [Lecture 13：Tool Chains](https://www.bilibili.com/video/BV11T411G7qB/?spm_id_from=333.788&vd_source=7a2542c6c909b3ee1fab551277360826)