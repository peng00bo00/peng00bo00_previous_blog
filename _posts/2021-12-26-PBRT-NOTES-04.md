---
layout: article
title: PBRT读书笔记04-Sampling and Reconstruction
tags: ["PBRT", "Rendering", "CG"]
key: PBRT-04
aside:
  toc: true
sidebar:
  nav: PBRT
---

> 这个系列是[Physically Based Rendering: From Theory To Implementation](https://pbr-book.org/)的读书笔记，本节主要介绍采样理论的相关内容。
<!--more-->

## Sampling Theory

在渲染的过程中我们需要对连续的函数进行采样来获得离散的数字图像。对连续信号进行采样的相关理论可以参考在CV课程中介绍过的[频域分析](/2021/08/31/OMSCS-CV-NOTES-03.html)的相关内容，这里主要介绍图像渲染时的**反走样(anti-aliasing)**相关技术。

反走样最直接的方法是提高采样的频率。根据采样定律，只要采样的频率大于信号最大频率的2倍就可以避免走样的问题。然而这种方法在实践中一般是行不通的，这是因为图形学中连续信号都不是**有限带宽(band limited)**的，理论上需要无限的采样率才能够重建出原始信号。因此需要一些其它的方法来解决渲染时的走样问题。

### Antialiasing Techniques

在渲染中常用的反走样计算可以分为三类：**非均匀采样(nonuniform sampling)**、**自适应采样(adaptive sampling)**和**预滤波(prefiltering)**。

#### Nonuniform Sampling

尽管原始信号是无限带宽的，理论上任意有限的采样率都无法完美解决走样的问题，但我们可以通过合理地设置采样率来减轻走样对视觉的影响。非均匀采样的思想是使用一个随机数来对采样频率进行扰动：

$$
\sum_{i=-\infty}^\infty \delta \bigg(x - (i + \frac{1}{2} - \xi) T \bigg)
$$

其中$\xi$为(0, 1)区间上的随机数。显然这样仍然无法避免走样的问题，但使用非均匀采样可以把规则的**伪影(artifacts)**转换成人眼不敏感的噪声。这样尽管走样的问题仍然存在，渲染出的图像却更加符合人的认知。

#### Adaptive Sampling

自适应采样的思想是对图像中不同的区域采用不同的采样频率：对于信号变化剧烈的区域，我们可以使用更高的采样频率从而减轻走样的问题。显然自适应采样的难点在于如何识别出图像中哪些区域有高频的信号，因此在实践中直接使用自适应采样的方法比较少见。

#### Prefiltering

预滤波的思想是在对信号进行重建前首先进行滤波来去除高频成分，这样就可以保证对滤波后的信号进行采样不会出现走样的问题。尽管对图像进行滤波往往会造成图像的模糊，但对人眼来说模糊的图像也要比走样要容易接受得多。

### Sources of Aliasing in Rendering

## Reference

- [7 Sampling and Reconstruction](https://pbr-book.org/3ed-2018/Sampling_and_Reconstruction)