---
layout: article
title: GAMES103课程笔记10-Surface Waves
tags: ["GAMES103", "CG"]
key: GAMES103-10
aside:
  toc: true
sidebar:
  nav: GAMES103
---

> 这个系列是GAMES103：基于物理的计算机动画入门([GAMES 103: Intro to Physics Based Animation](http://games-cn.org/games103/))的同步课程笔记。本课程是计算机动画的入门课程，着重介绍各种基于物理的动画仿真模拟技术。本节课物理仿真中的水波模拟。
<!--more-->

## Fluid Effects

**流体仿真(fluid simulation)**是物理仿真中重要的研究内容。现实生活中常见的流体包括液体、气体、烟尘等。和前面介绍过的固体相比，流体具有更加丰富的行为，因此流体仿真也往往要更加复杂。

<div align=center>
<img src="https://i.imgur.com/doduwer.jpg" width="80%">
</div>

根据认识问题的角度不同，流体仿真的方法大体可以分为**Lagrangian方法()**以及**Eulerian方法(Eulerian approach)**两大类。简单来说，Lagrangian方法更多地是从粒子的角度来模拟流体的行为，即考虑每个粒子在流场中的运动；而Eulerian方法则更多地从空间的角度来模拟流体运动，对于固定的空间Eulerian方法会考虑流场的不同物理量在空间中的变化。尽管本节课不会涉及这两类方法的细节，但在后面的课程中则会深入讨论二者的差异。

<div align=center>
<img src="https://i.imgur.com/RI4jSX0.png" width="80%">
</div>

## Height Field Model

**高度场(height field)**是进行水波模拟的经典方法。以2D(1.5D)空间为例，我们可以把水波看作是沿$x$轴分布的高度函数$h(x)$。类似地，水波的速度也是一个一维函数$u(x)$。

<div align=center>
<img src="https://i.imgur.com/h1QxOLK.png" width="80%">
</div>

显然只要我们计算出每一时刻的高度场和速度场就可以实现对水波的模拟。对于高度场，在任意位置和任意时刻需要满足微分方程：

$$
\frac{d h(x)}{d t} + \frac{d (h(x) u(x))}{d x} = 0
$$

为了便于理解，我们可以对上式进行变形：

$$
d h(x) \ d x = - d (h(x) u(x)) \ d t
$$

等号左边表示任意时刻$x$位置流量的变化量。而右边$d (h(x) u(x))$项则可以表示为：

$$
d (h(x) u(x)) = h(x + dx) u(x + dx) - h(x) u(x)
$$

即$x$位置单位时间的流出量，对它取负号并乘上$dt$即为净变化量，因此左右两端相等。

<div align=center>
<img src="https://i.imgur.com/UBfte1m.png" width="80%">
</div>

而对于速度场则需要满足方程：

$$
\frac{d u(x)}{d t} = -u(x) \frac{d u(x)}{d x} - \frac{1}{\rho} \frac{d P(x)}{d x} + a(x)
$$

实际上上式即为无黏性流体的一维NS方程，其中$a(x)$表示外力。

<div align=center>
<img src="https://i.imgur.com/FZeSlip.png" width="80%">
</div>

## Shallow Wave Equation

## Coupling

## Reference

- [Lecture 10: Surface Waves](https://www.bilibili.com/video/BV12Q4y1S73g?p=10)
- [Wikipedia: Shallow water equations](https://en.wikipedia.org/wiki/Shallow_water_equations)